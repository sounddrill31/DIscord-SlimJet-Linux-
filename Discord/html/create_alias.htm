<!DOCTYPE html>
<HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Create alias</title>
<link href="css/common.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="formdata.js"></script>
<script type="text/javascript">
var alias_ = [];
function $(s) {
  return document.getElementById(s);
}
function getByID(elem_id) {
  return $(elem_id);
}
function getResText(res_id) {
  var res_elem = getByID(res_id);
  if (res_elem != undefined) {
    return res_elem.innerText;
  }
}
function lzAlert(text_res_id) {
  alert(getResText(text_res_id));
}
function lzConfirm(text_res_id) {
  return confirm(getResText(text_res_id));
}
function isExistAlias(a) {
  return alias_.indexOf(a)!=-1;
}
function initDialog(alias) {
  if (alias.indexOf('\t')!=-1) {
    alias_ = alias.split('\t');
  } else {
    alias_ = [alias];
  }

}
function onOk()
{
  if($('text_alias').value=='') {
    lzAlert('RES_INVALID_ALIAS');
    return;
  }
  if($('text_url').value=='') {
    lzAlert('RES_INVALID_URL');
    return;
  }
  if(isExistAlias($('text_alias').value)) {
    lzAlert('RES_ITEM_ALREADY_EXISTS');
    return;
  }
  document.sjReturnValue = GetFormData(document.forms[0]);
  //console.log(document.sjReturnValue);
  window.close();
  // location="sjcmd://validate_input "+encodeURI(document.sjReturnValue);
}

function onCancel()
{
  document.sjReturnValue = "";
  window.close();
}

window.onload = function(e)
{
  var oInput = document.getElementById("text_alias");
	oInput.focus();
}
document.onkeydown = function(e)
{
    if((e.keyCode || e.which) == 13){
        document.getElementById("button_save").click();
    }
}

</SCRIPT>
</head>
<BODY style="font-size:13px; font-family:Verdana, Geneva, sans-serif">
<div style="width:400px">
<form><table width="100%" border="0">
  <tr>
    <td><label>URL:</label></td>
    <td width="320"><input name="url" value = "" type="text" id = "text_url" style="width:300px;" /></td>
  </tr>
  <tr>
    <td><label>Alias:</label></td>
    <td><input name="alias" value = "" type="text" id = "text_alias" style="width:300px;" /> </td>
  </tr>
</table>
  </form>
  <table width="100%" border="0">
    <tr align="center">
      <td width="50%"><button id="button_save" onclick = "onOk();" style="min-width:80px">OK</button></td>
      <td width="50%"><button onclick = "onCancel();" style="min-width:80px">Cancel</button></td>
    </tr>
  </table>
    <div id="slimjet_dialog_res" style="display:none">
    <span id="RES_INVALID_ALIAS">Please specify a valid alias!</span>
    <span id="RES_INVALID_URL">Please specify a valid URL!</span>
    <span id="RES_ITEM_ALREADY_EXISTS">Alias already exists!</span>
  </div>
</div>
</BODY>
</HTML>
