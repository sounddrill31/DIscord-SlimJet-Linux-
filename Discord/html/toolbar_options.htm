<!DOCTYPE html>
<HTML i18n-values="dir:textdirection;" id="uber" class dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Customize toolbar</title>
  <link href="css/chrome_shared.css" rel="stylesheet" type="text/css" />
  <link href="css/common.css" rel="stylesheet" type="text/css" />
  <link href="css/list.css" rel="stylesheet" type="text/css" />
  <link href="css/toolbar_options.css" rel="stylesheet" type="text/css" />
  <script src="js/cr.js" type="text/javascript"></script>
  <script src="js/cr/event_target.js" type="text/javascript"></script>
  <script src="js/cr/ui.js" type="text/javascript"></script>
  <script src="js/cr/ui/array_data_model.js" type="text/javascript"></script>
  <script src="js/cr/ui/list_selection_model.js" type="text/javascript"></script>
  <script src="js/cr/ui/list_selection_controller.js" type="text/javascript"></script>
  <script src="js/cr/ui/list_single_selection_model.js" type="text/javascript"></script>
  <script src="js/cr/ui/list_item.js" type="text/javascript"></script>
  <script src="js/cr/ui/list.js" type="text/javascript"></script>
  <script src="js/cr/ui/focus_manager.js" type="text/javascript"></script>
  <script src="js/util.js" type="text/javascript"></script>
  <script src="deletable_item_list.js" type="text/javascript"></script>
  <script src="toolbar_button_list.js" type="text/javascript"></script>
  <script src="toolbar_options.js" type="text/javascript"></script>
  <script type="text/javascript">
    var available_button_ = '';
    var visible_button_ = '';
    var ToolbarOptions=options.ToolbarOptions;
    var init_ui_ = false;
    function initDialog(available_buttons, visible_buttons) {
        if (!init_ui_) {
            available_buttons_ = available_buttons;
        } else {
            available_buttons = available_buttons_;//for reset
        }
        visible_button_ = visible_buttons;
        var i = 0;
        var button_list = ''
        if (available_buttons.indexOf('\v') != -1) {
            button_list = available_buttons.split('\v');
        } else {
            button_list = [available_buttons];
        }
        var available_button_info_list = [];
        for (var i = 0; i < button_list.length; i++) {
            if (button_list[i].indexOf('\t') != -1) {
                var available_button = button_list[i].split('\t');
                var available_button_info = {
                    'toolbuttonName': available_button[0],
                    'toolbuttonIcon': available_button[1],
                    'displayText': available_button[2],
                    'displayTooltip': available_button[3]
                };
                available_button_info_list.push(available_button_info);
            }
        }

        var visible_button_list = '';
        if (visible_buttons.indexOf('\t') != -1) {
            visible_button_list = visible_buttons.split('\t');
        } else {
            visible_button_list = [visible_buttons];
        }

        var visible_button_info_list = [];
        for (var i = 0; i < visible_button_list.length; i++) {
            var visible_button_info = {
                'toolbuttonName': visible_button_list[i],
            };
            visible_button_info_list.push(visible_button_info);
        }

        ToolbarOptions.getInstance().initializePage();
        ToolbarOptions.getInstance().setAvailableButtonList_(available_button_info_list);
        ToolbarOptions.getInstance().setCurrentToolButtonList_(visible_button_info_list);
        ToolbarOptions.getInstance().loadToolButtonList_();

        if (!init_ui_) {
            init_ui_=true;
            $('customize-toolbar-confirm').onclick=function () {
                window.close();
            };
            $('toolbar_options_reset_buttons').onclick=function () {
                document.sjReturnValue = 'HOME';
                location = 'sjcmd://save_toolbuttons ' + document.sjReturnValue;
                delete $('current-button-list').dataModel;
                $('current-button-list').dataModel = null;
                initDialog('', document.sjReturnValue);
            };
        }
      }
  </script>
  <style type="text/css">

  </style>
</head>
<body>
<div id="slimjet_toolbar_options_dialog" style="width:620px;height:520px;margin-left:20px;">
<!-- Kent@FlashPeak toolbar options html -->
<div id="toolbarOptionsPage" class="page">
  <div class="content-area">
    <div class="toolbar-options-header">
      <div>You can move the items by drag-and-drop.</div>
    </div>
    <div class="toolbar-options">
      <div class="toolbar-options-left">
        <h3>Available toolbar buttons</h3>
        <list id="available-button-list"></list>
        <div id="toolbar-options-list-dropmarker"></div>
      </div>
      <div class="toolbar-options-right">
        <h3>Current toolbar buttons</h3>
        <list id="current-button-list"></list>
      </div>
    </div>
    <div class="toolbar-options-footer">

    </div>
  </div>

  <div class="action-area">
    <div class="button-strip" id="button_area">
      <button id="customize-toolbar-confirm">Done</button>
      <button id="toolbar_options_reset_buttons">Reset</button>
    </div>
  </div>

</div>
<!-- END OF Kent@FlashPeak toolbar options html -->
</div>
</body>
</HTML>